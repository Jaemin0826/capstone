<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geolocation Visualization with p5.js</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #121212;
            color: #ffffff;
            font-family: Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
        }
        #defaultCanvas0 {
            display: block;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
</head>
<body>
    <script>
        let latitude = 0;
        let longitude = 0;
        let accuracy = 0;
        let isLocationLoaded = false;

        function setup() {
            createCanvas(800, 600);
            textAlign(CENTER, CENTER);
            textSize(16);

            if (navigator.geolocation) {
                // 위치를 지속적으로 업데이트
                navigator.geolocation.watchPosition(
                    (position) => {
                        latitude = position.coords.latitude;
                        longitude = position.coords.longitude;
                        accuracy = position.coords.accuracy;
                        isLocationLoaded = true;
                    },
                    (error) => {
                        console.error("위치 정보를 가져올 수 없습니다.", error);
                    },
                    {
                        enableHighAccuracy: true,
                    }
                );
            } else {
                console.error("Geolocation API를 지원하지 않는 브라우저입니다.");
            }
        }

        function draw() {
            background(30);

            if (isLocationLoaded) {
                fill(0, 200, 100);
                ellipse(map(longitude, -180, 180, 0, width), map(latitude, 90, -90, 0, height), 50, 50);

                fill(255);
                text(
                    `위도: ${latitude.toFixed(4)}\n경도: ${longitude.toFixed(4)}\n정확도: ${accuracy.toFixed(1)}m`,
                    width / 2,
                    height - 50
                );
            } else {
                fill(255);
                text("위치 데이터를 불러오는 중...", width / 2, height / 2);
            }
        }
    </script>
</body>
</html>
